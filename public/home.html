<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Aiguilog - Accueil</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="header-container"></div>

  <main style="padding: 20px; max-width: 600px; margin: auto;">
    <h1>Bienvenue sur Aiguilog !</h1>
    <p id="welcome-msg">Chargement du message...</p>
    <button id="logout-btn" style="padding: 10px 15px; background: #f44336; color: white; border:none; border-radius: 5px; cursor: pointer;">Déconnexion</button>
  </main>

  <script src="header.js"></script>
  <script>
    fetch('header.html').then(res => res.text()).then(html => {
      document.getElementById('header-container').innerHTML = html;
    });

    document.addEventListener('DOMContentLoaded', () => {
      const username = localStorage.getItem('username');
      if (!username) {
        // Si pas connecté, rediriger vers login
        window.location.href = '/index.html';
        return;
      }

      document.getElementById('welcome-msg').textContent = `Bonjour ${username} ! Content de te revoir sur Aiguilog.`;

      document.getElementById('logout-btn').addEventListener('click', () => {
        localStorage.removeItem('token');
        localStorage.removeItem('username');
        window.location.href = '/index.html';
      });
    });
  </script>
</body>
</html>
