<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Aiguilog - Rechercher</title>
    <link rel="stylesheet" href="style.css" />

    <!-- Leaflet (OSM) -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
      defer
    ></script>

    <style>
      #map { height: 360px; border-radius: 16px; }
      .result-grid{
        display:grid; grid-template-columns: 1fr 1fr; gap:1rem;
      }
      .result-card{ padding:1rem; border-radius:16px; }
      .result-meta{ display:grid; grid-template-columns: 1fr 1fr; gap:.75rem; }
      .result-meta .cell{ padding:.75rem; border-radius:12px; }
      .wikidata{
        display:grid; grid-template-columns: 240px 1fr; gap:1rem; align-items:start;
      }
      .wikidata img{ width:100%; height:240px; object-fit:cover; border-radius:14px; }
      @media (max-width: 900px){
        .result-grid{ grid-template-columns: 1fr; }
        .wikidata{ grid-template-columns: 1fr; }
        #map{ height: 300px; }
      }
    </style>
  </head>
  <body>
    <header class="main-header">
      <div class="nav-container">
        <!-- Desktop Navigation -->
        <div class="desktop-nav">
          <a href="index.html" class="logo-link">
            <picture>
              <source media="(prefers-color-scheme: dark)" srcset="images/logo-white.png">
              <source media="(prefers-color-scheme: light)" srcset="images/logo-black.png">
              <img src="images/logo-black.png" alt="Aiguilog" class="logo-img">
            </picture>
          </a>
          <nav class="nav-links">
            <a href="sorties-faites.html" class="nav-btn">Fait</a>
            <a href="sorties-a-faire.html" class="nav-btn">À Faire</a>
            <a href="rechercher.html" class="nav-btn active">Rechercher</a>
          </nav>
          <a href="mon-compte.html" class="user-icon-link">
            <picture>
              <source media="(prefers-color-scheme: dark)" srcset="images/user-icon-white.png">
              <source media="(prefers-color-scheme: light)" srcset="images/user-icon-black.png">
              <img src="images/user-icon-black.png" alt="Compte" class="user-icon">
            </picture>
          </a>
        </div>

        <!-- Mobile -->
        <div class="mobile-nav">
          <a href="index.html" class="logo-link-mobile">
            <picture>
              <source media="(prefers-color-scheme: dark)" srcset="images/logo-white.png">
              <source media="(prefers-color-scheme: light)" srcset="images/logo-black.png">
              <img src="images/logo-black.png" alt="Aiguilog" class="logo-img">
            </picture>
          </a>
          <button id="mobile-menu-toggle" aria-label="Ouvrir le menu">
            <picture>
              <source media="(prefers-color-scheme: dark)" srcset="images/hamburger-white.png">
              <source media="(prefers-color-scheme: light)" srcset="images/hamburger-black.png">
              <img src="images/hamburger-black.png" alt="Menu" class="hamburger-icon">
            </picture>
          </button>
        </div>
      </div>

      <nav id="mobile-menu">
        <ul>
          <li class="menu-user-icon">
            <a href="mon-compte.html">
              <picture>
                <source media="(prefers-color-scheme: dark)" srcset="images/user-icon-white.png">
                <source media="(prefers-color-scheme: light)" srcset="images/user-icon-black.png">
                <img src="images/user-icon-black.png" alt="Compte" class="user-icon-menu">
              </picture>
            </a>
          </li>
          <li><a href="sorties-faites.html">Fait</a></li>
          <li><a href="sorties-a-faire.html">À Faire</a></li>
          <li><a href="rechercher.html" class="active">Rechercher</a></li>
        </ul>
      </nav>
    </header>

    <div class="container is-glass">
      <h2>Rechercher un sommet</h2>
      <div class="page-intro">
        <p>Commence à taper pour voir les suggestions. Sélectionne un sommet pour voir sa position sur la carte et, si disponible, ses infos Wikidata.</p>
      </div>

      <form class="two-cols" id="search-form" onsubmit="return false;">
        <div class="full-width">
          <input id="search-input" list="search-summits" type="text" placeholder="Nom du sommet (ex : Mont Revard)" autocomplete="off" />
          <datalist id="search-summits"></datalist>
        </div>
      </form>

      <div id="result" class="result-grid" style="display:none;">
        <section class="result-card is-glass">
          <h3 id="res-name" style="margin-bottom:.5rem;">—</h3>
          <div class="result-meta">
            <div class="cell is-glass">
              <small class="muted">Altitude</small>
              <div id="res-alt">—</div>
            </div>
            <div class="cell is-glass">
              <small class="muted">Coordonnées</small>
              <div id="res-coords">—</div>
            </div>
            <div class="cell is-glass">
              <small class="muted">Prominence</small>
              <div id="res-prom">—</div>
            </div>
            <div class="cell is-glass">
              <small class="muted">Source</small>
              <div id="res-source">—</div>
            </div>
          </div>

          <div style="margin-top:1rem; display:flex; gap:.5rem; flex-wrap:wrap;">
            <a id="lnk-osm" class="nav-btn" target="_blank" rel="noopener">Ouvrir dans OpenStreetMap</a>
            <a id="lnk-gmaps" class="btn-ghost nav-btn" target="_blank" rel="noopener">Ouvrir dans Google Maps</a>
          </div>
        </section>

        <section class="is-glass result-card">
          <div id="map" aria-label="Carte OpenStreetMap"></div>
        </section>

        <section class="is-glass result-card" style="grid-column:1 / span 2;">
          <h3 style="margin-bottom:.5rem;">Wikidata</h3>
          <div id="wikidata-empty" class="muted">Aucun identifiant Wikidata pour ce sommet.</div>
          <div id="wikidata" class="wikidata" style="display:none;">
            <img id="wd-image" alt="" />
            <div>
              <h4 id="wd-title" style="margin:0 0 .25rem 0;">—</h4>
              <p id="wd-desc" class="muted" style="margin:0 0 .75rem 0;">—</p>
              <a id="wd-link" class="nav-btn" target="_blank" rel="noopener">Voir la fiche Wikidata</a>
            </div>
          </div>
        </section>
      </div>
    </div>

    <script src="script.js" defer></script>
  </body>
</html>
