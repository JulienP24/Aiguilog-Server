:root{
  --primary:#0a84ff; --primary-rgb:10,132,255; --accent:#64d2ff;
  --background:#f7f8fb; --ink:#121314;

  --surface:rgba(255,255,255,.65);
  --glass-tint:rgba(255,255,255,.35);
  --glass-stroke:1px solid rgba(0,0,0,.12);
  --glass-blur:20px; --glass-sat:160%;
  --glass-shadow:0 12px 30px rgba(0,0,0,.12);
  --inner-edge:inset 0 1px 0 rgba(255,255,255,.8);

  --btn-grad:linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,.35));
  --btn-accent:linear-gradient(180deg, rgba(var(--primary-rgb),.35), rgba(var(--primary-rgb),.18));
  --btn-border:1px solid rgba(0,0,0,.12);
  --btn-shadow:0 10px 24px rgba(var(--primary-rgb),.18);

  --font:-apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, sans-serif;
  --radius-xl:20px; --radius-pill:9999px;

  color-scheme: light dark;
}

/* Reset + fond */
*{box-sizing:border-box;margin:0;padding:0}
html,body{
  min-height:100dvh;
  background:
    radial-gradient(1000px 700px at 0% 0%, rgba(10,132,255,.07), transparent 60%),
    radial-gradient(900px 600px at 100% 20%, rgba(100,210,255,.08), transparent 60%),
    var(--background);
  color:var(--ink);
  font-family:var(--font);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  overflow-x:hidden;
}
img,picture{display:block;max-width:100%}

/* Verre */
.is-glass{
  background:linear-gradient(180deg, var(--glass-tint), rgba(255,255,255,.18)), var(--surface);
  backdrop-filter:blur(var(--glass-blur)) saturate(var(--glass-sat));
  -webkit-backdrop-filter:blur(var(--glass-blur)) saturate(var(--glass-sat));
  border:var(--glass-stroke); box-shadow:var(--glass-shadow); position:relative;
}
.is-glass::before{content:"";position:absolute;inset:0;border-radius:inherit;box-shadow:var(--inner-edge);pointer-events:none}

/* Header */
.main-header{
  position:sticky; top:10px; z-index:1000; margin:0 2%;
  border-radius:var(--radius-pill); padding:.7rem;
  background:linear-gradient(180deg, rgba(255,255,255,.45), rgba(255,255,255,.25)), var(--surface);
  border:var(--glass-stroke); box-shadow:var(--glass-shadow);
  backdrop-filter:blur(var(--glass-blur)) saturate(var(--glass-sat));
}
.nav-container{display:flex;align-items:center;justify-content:space-between}
.desktop-nav{display:flex;align-items:center;width:100%}
.logo-link .logo-img,.logo-link-mobile .logo-img{height:50px}
.nav-links{display:flex;gap:1rem;flex:1;justify-content:center}

/* Boutons glossy */
.nav-btn,button,.cell-actions .edit-btn,.cell-actions .delete-btn,.fab{
  appearance:none;border-radius:14px;border:var(--btn-border);
  background-image:var(--btn-grad), var(--btn-accent); background-blend-mode:screen,normal;
  color:#0b2540; padding:.55rem 1rem; font-weight:700;
  box-shadow:var(--btn-shadow); transition:transform .15s ease, filter .2s ease, box-shadow .2s ease;
  display:inline-flex; align-items:center; justify-content:center; text-decoration:none; position:relative; overflow:hidden;
}
.nav-btn.active{outline:2px solid rgba(var(--primary-rgb),.7); box-shadow:0 0 0 6px rgba(var(--primary-rgb),.12), var(--btn-shadow)}
.nav-btn:hover,button:hover,.fab:hover{filter:brightness(1.05)}
.nav-btn:active,button:active,.fab:active{transform:translateY(1px) scale(.995)}
@keyframes glassShimmer{0%{transform:translateX(-140%) translateY(-40%) rotate(12deg)}100%{transform:translateX(140%) translateY(40%) rotate(12deg)}}
.nav-btn::after,button::after,.cell-actions .edit-btn::after,.cell-actions .delete-btn::after,.fab::after{
  content:"";position:absolute;inset:-140% -60%;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,.65),transparent);
  opacity:.55;transform:translateX(-120%) rotate(12deg)
}
.nav-btn:hover::after,button:hover::after,.cell-actions .edit-btn:hover::after,.cell-actions .delete-btn:hover::after,.fab:hover::after{
  animation:glassShimmer 1.1s ease forwards
}

/* User icons */
.user-icon{height:48px;width:48px;border-radius:50%;object-fit:cover}
.user-icon-menu{height:64px;width:64px;border-radius:50%;object-fit:cover}
#mobile-menu:not(.open) .user-icon-menu{display:none}

/* Mobile nav */
.mobile-nav{display:none;align-items:center;justify-content:space-between;width:100%}
#mobile-menu-toggle{background:transparent;border:none;padding:0;cursor:pointer}
.hamburger-icon{height:28px;width:28px;object-fit:contain}
#mobile-menu{
  position:fixed;top:0;right:-100%;width:80%;height:100%;z-index:1100;padding:2rem 1.5rem;transition:right .3s ease;
  background:linear-gradient(180deg, rgba(255,255,255,.55), rgba(255,255,255,.28)), var(--surface);
  border-left:var(--glass-stroke); box-shadow:-8px 0 28px rgba(0,0,0,.12);
  backdrop-filter:blur(18px) saturate(160%); -webkit-backdrop-filter:blur(18px) saturate(160%)
}
#mobile-menu.open{right:0}
#mobile-menu ul{list-style:none;display:flex;flex-direction:column;gap:2rem;align-items:center}

/* Container aligné au header */
.container{
  width:calc(100% - 4%); margin:2rem 2%; padding:1.5rem; border-radius:var(--radius-xl);
  background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(255,255,255,.35)), var(--surface);
  border:var(--glass-stroke); box-shadow:var(--glass-shadow);
  backdrop-filter:blur(var(--glass-blur)) saturate(var(--glass-sat)); -webkit-backdrop-filter:blur(var(--glass-blur)) saturate(var(--glass-sat));
}

/* Forms */
form{margin-bottom:2rem;padding:1.2rem;border-radius:var(--radius-xl);background:linear-gradient(180deg, rgba(255,255,255,.7), rgba(255,255,255,.4)), var(--surface);border:var(--glass-stroke);box-shadow:var(--glass-shadow)}
form > * + *{margin-top:.9rem}
input,select,textarea{
  padding:.9rem;border-radius:14px;width:100%;border:1px solid rgba(0,0,0,.1);
  background:linear-gradient(180deg, rgba(255,255,255,.9), rgba(255,255,255,.6));color:#0b2540;box-shadow:inset 0 1px 0 rgba(255,255,255,.7)
}
input::placeholder,textarea::placeholder{color:#6b7c91}

/* Intro */
.page-intro{margin-bottom:1rem}
.page-intro p{opacity:.8}

/* Tables */
.table-container{padding:1rem;border-radius:var(--radius-xl);background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(255,255,255,.35)), var(--surface);border:var(--glass-stroke);box-shadow:var(--glass-shadow)}
table{width:100%;border-collapse:collapse;table-layout:auto;background:transparent} /* auto = plus de … */
th,td{padding:1rem;border-bottom:1px solid rgba(0,0,0,.08);vertical-align:middle}
th{position:sticky;top:0;z-index:1;background:linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,.5));text-align:left}

/* Pas d’ellipses par défaut */
.table--sorties td{white-space:nowrap; overflow:visible; text-overflow:clip}
/* Sommet et Détails peuvent aller à la ligne */
.table--sorties td:nth-child(2),
.table--sorties td:nth-child(8){white-space:normal}

/* Actions toujours visibles + assez large */
td.cell-actions{white-space:nowrap; overflow:visible}
.cell-actions{width:140px; display:flex; gap:8px; align-items:center}
.cell-actions .edit-btn,.cell-actions .delete-btn{width:48px;height:44px;border-radius:12px;border:var(--btn-border)}
.cell-actions .delete-btn{background-image:var(--btn-grad), linear-gradient(180deg, rgba(255,59,48,.45), rgba(255,59,48,.28));box-shadow:0 10px 22px rgba(255,59,48,.18)}

/* Inputs compacts en édition */
.tbl-input{width:100%}
.tbl-input--num{width:12ch;text-align:right}
.tbl-input--year{width:12ch;text-align:center}
.tbl-input--date{width:14ch;text-align:center}
.tbl-input--method{min-width:18ch}
.tbl-input--cot{width:12ch}
.tbl-input--details{width:100%;min-height:2.75rem;max-height:12rem;resize:vertical;line-height:1.4}

/* FAB + modal */
.fab{width:56px;height:56px;border-radius:50%;font-size:28px;line-height:1;align-items:center;justify-content:center;position:fixed;right:24px;bottom:24px;z-index:1200}
dialog.modal{border:none;padding:0;border-radius:22px;max-width:min(680px, calc(100% - 2rem));width:100%;margin:auto} /* centré */
dialog.modal::backdrop{background:rgba(0,0,0,.3);backdrop-filter:blur(4px)}
.modal-body{padding:1rem}
.modal-header{display:flex;align-items:center;justify-content:space-between;padding:1rem 1rem .25rem 1rem}
.modal-title{font-size:1.2rem;font-weight:800}
.modal-actions{display:flex;gap:.5rem;justify-content:flex-end;padding:0 1rem 1rem}
.btn-ghost{background:linear-gradient(180deg, rgba(255,255,255,.55), rgba(255,255,255,.25));border:var(--btn-border)}
.two-cols{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
.col-left,.col-right{display:flex;flex-direction:column;gap:1rem}
.full-width{grid-column:1 / span 2}

/* Responsive */
@media (max-width:768px){
  .desktop-nav{display:none}
  .mobile-nav{display:flex}
  .container{width:calc(100% - 1.5rem); margin:1rem .75rem; padding:1rem}
  .two-cols{grid-template-columns:1fr}
  .full-width{grid-column:auto}
}

/* Dark auto */
@media (prefers-color-scheme: dark){
  :root{
    --background:#0b0b0c; --ink:#f2f2f7; --surface:rgba(255,255,255,.08); --glass-tint:rgba(255,255,255,.12);
    --glass-stroke:1px solid rgba(255,255,255,.18); --glass-shadow:0 12px 30px rgba(0,0,0,.35);
    --btn-border:1px solid rgba(255,255,255,.28);
    --btn-grad:linear-gradient(180deg, rgba(255,255,255,.28), rgba(255,255,255,.12));
    --btn-accent:linear-gradient(180deg, rgba(var(--primary-rgb),.35), rgba(var(--primary-rgb),.18));
  }
  th,td{border-bottom:1px solid rgba(255,255,255,.12)}
}
